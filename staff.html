<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>THE BAG | Staff Panel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    <style>
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #020617; color: white; }
        .blur-screen { backdrop-filter: blur(50px); }
    </style>
</head>
<body class="p-8">

    <div id="lock" class="fixed inset-0 blur-screen bg-slate-900/80 flex items-center justify-center z-50">
        <div class="bg-slate-800 p-10 rounded-[3rem] border border-slate-700 text-center">
            <h2 class="text-2xl font-black uppercase italic text-blue-500 mb-6">Staff Access</h2>
            <input type="password" id="pass" placeholder="Enter Password" class="bg-slate-900 p-4 rounded-2xl outline-none border border-slate-700 mb-4 text-center font-bold">
            <button onclick="checkPass()" class="w-full bg-blue-600 p-4 rounded-2xl font-black uppercase">Unlock Panel</button>
        </div>
    </div>

    <div id="content" class="max-w-4xl mx-auto opacity-10">
        <h1 class="text-4xl font-black italic uppercase text-blue-500 mb-10">Live Orders.</h1>
        <div id="order-list" class="space-y-4"></div>
    </div>

    <script>
        const firebaseConfig = { apiKey: "AIzaSyAFGoJyyvtspQSauHUrWvSBWNF2taGJOYE", databaseURL: "https://thebagsite-default-rtdb.asia-southeast1.firebasedatabase.app/", projectId: "thebagsite" };
        firebase.initializeApp(firebaseConfig); const db = firebase.database();

        function checkPass() {
            if(document.getElementById('pass').value === "BAG2026") { // Set your password here
                document.getElementById('lock').classList.add('hidden');
                document.getElementById('content').classList.remove('opacity-10');
            } else { alert("Wrong Password"); }
        }

        db.ref('orders').on('value', snap => {
            const list = document.getElementById('order-list');
            list.innerHTML = "";
            const orders = snap.val();
            for(let id in orders) {
                if(orders[id].status === 'active') {
                    list.innerHTML += `
                    <div class="bg-slate-800 p-6 rounded-3xl border border-slate-700 flex justify-between items-center">
                        <div>
                            <p class="text-xs font-black text-blue-400 uppercase">Student</p>
                            <h3 class="text-xl font-black">${orders[id].name}</h3>
                        </div>
                        <button onclick="cancelOrder('${id}')" class="bg-red-600 px-6 py-3 rounded-xl font-black uppercase text-xs">Cancel Order</button>
                    </div>`;
                }
            }
        });

        function cancelOrder(id) { db.ref('orders/' + id).update({ status: 'cancelled' }); }
    </script>
</body>
</html>
